# 상속관계 매핑

---

객체의 상속 구조와 DB의 슈퍼타입, 서브타입 관계를 매핑하는 것  
* 객체는 명확한 상속 관계가 있지만 관계형 데이터베이스는 없다.  

---

### 데이터베이스 구조 전략
예 : 상품 <-> 앨범, 영화, 책 

1. __조인 전략__  
__슈퍼타입 - 상품__ : item_id (pk) <-> 앨범, 영화  
__서브타입 - 앨범, 영화, 책__ : item_id(pk, fk), 기타 정보  
  

* 장점  
가장 정석이다.  
테이블이 정규화 된다.  
저장공간을 효율적으로 사용할 수 있다.
* 단점  
조회 성능이 약간 떨어질 수 있지만 PK와 Index가 잘 설계되어있으면 충분히 빠르다.  
데이터 저장 시 insert 쿼리가 여러번 실행되어야 한다.

2. __단일 테이블 전략__  
__상품__ : item_id(pk), 기타정보  
* 장점  
조인이 필요 없어서 조회 성능이 좋다.  
조회 쿼리가 단순하다(single table).

* 단점  
null을 허용해야하는 컬럼이 많아진다.  
단일테이블이 모든 데이터를 관리하기 때문에 테이블이 무거워질 수 있다.

3. __구현 클래스별 테이블 전략__  
슈퍼타입 없이 서브타입 테이블로만 구현
* 장점  
not null 제약조건을 유연하게 사용할 수 있다.
* 단점
그 외 전부...  
__절대로 추천하지 않는 방식이다.__

---

JPA는 위 3가지 모든 구현방식이 모두 매핑 가능하다(=객체). 